(function(t){function e(e){for(var r,a,o=e[0],c=e[1],u=e[2],l=0,p=[];l<o.length;l++)a=o[l],Object.prototype.hasOwnProperty.call(i,a)&&i[a]&&p.push(i[a][0]),i[a]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);d&&d(e);while(p.length)p.shift()();return s.push.apply(s,u||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],r=!0,a=1;a<n.length;a++){var o=n[a];0!==i[o]&&(r=!1)}r&&(s.splice(e--,1),t=c(c.s=n[0]))}return t}var r={},a={app:0},i={app:0},s=[];function o(t){return c.p+"js/"+({home:"home","my-proposal~new-proposal~vote":"my-proposal~new-proposal~vote","my-proposal":"my-proposal","new-proposal":"new-proposal",vote:"vote"}[t]||t)+"."+{home:"eef55c41","my-proposal~new-proposal~vote":"af0cf29b","my-proposal":"a1ff1a17","new-proposal":"a6c53ba5",vote:"7d1a29d7"}[t]+".js"}function c(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(t){var e=[],n={home:1,"my-proposal":1,"new-proposal":1,vote:1};a[t]?e.push(a[t]):0!==a[t]&&n[t]&&e.push(a[t]=new Promise((function(e,n){for(var r="css/"+({home:"home","my-proposal~new-proposal~vote":"my-proposal~new-proposal~vote","my-proposal":"my-proposal","new-proposal":"new-proposal",vote:"vote"}[t]||t)+"."+{home:"bc9df1f9","my-proposal~new-proposal~vote":"31d6cfe0","my-proposal":"27bcebb3","new-proposal":"b654c37a",vote:"6b5d2db8"}[t]+".css",i=c.p+r,s=document.getElementsByTagName("link"),o=0;o<s.length;o++){var u=s[o],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===r||l===i))return e()}var p=document.getElementsByTagName("style");for(o=0;o<p.length;o++){u=p[o],l=u.getAttribute("data-href");if(l===r||l===i)return e()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=e,d.onerror=function(e){var r=e&&e.target&&e.target.src||i,s=new Error("Loading CSS chunk "+t+" failed.\n("+r+")");s.code="CSS_CHUNK_LOAD_FAILED",s.request=r,delete a[t],d.parentNode.removeChild(d),n(s)},d.href=i;var b=document.getElementsByTagName("head")[0];b.appendChild(d)})).then((function(){a[t]=0})));var r=i[t];if(0!==r)if(r)e.push(r[2]);else{var s=new Promise((function(e,n){r=i[t]=[e,n]}));e.push(r[2]=s);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,c.nc&&l.setAttribute("nonce",c.nc),l.src=o(t);var p=new Error;u=function(e){l.onerror=l.onload=null,clearTimeout(d);var n=i[t];if(0!==n){if(n){var r=e&&("load"===e.type?"missing":e.type),a=e&&e.target&&e.target.src;p.message="Loading chunk "+t+" failed.\n("+r+": "+a+")",p.name="ChunkLoadError",p.type=r,p.request=a,n[1](p)}i[t]=void 0}};var d=setTimeout((function(){u({type:"timeout",target:l})}),12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(e)},c.m=t,c.c=r,c.d=function(t,e,n){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)c.d(n,r,function(e){return t[e]}.bind(null,r));return n},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/",c.oe=function(t){throw console.error(t),t};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=e,u=u.slice();for(var p=0;p<u.length;p++)e(u[p]);var d=l;s.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("cd49")},"042f":function(t,e,n){},"0aad":function(t,e,n){"use strict";n("b28b")},"0d6c":function(t,e,n){},"0e1c":function(t,e,n){"use strict";n("4d91")},1:function(t,e){},10:function(t,e){},11:function(t,e){},12:function(t,e){},13:function(t,e){},14:function(t,e){},15:function(t,e){},16:function(t,e){},17:function(t,e){},1737:function(t,e,n){"use strict";n("0d6c")},"17ec":function(t,e,n){"use strict";n("b94c")},"1f2a":function(t,e,n){},2:function(t,e){},2525:function(t,e,n){"use strict";n("dce4")},2815:function(t,e,n){"use strict";n("aaeb")},3:function(t,e){},"319d":function(t,e,n){"use strict";n("4b6b")},"32b1":function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"d",(function(){return c})),n.d(e,"e",(function(){return d})),n.d(e,"c",(function(){return b})),n.d(e,"a",(function(){return v})),n.d(e,"g",(function(){return y})),n.d(e,"f",(function(){return g}));n("fb6a"),n("d3b7"),n("25f0"),n("4c53");var r=n("399f"),a=n.n(r),i=n("3337").curves,s=i.p256,o=s.g,c=s.n,u=new a.a("ffffffff00000001000000000000000000000000fffffffffffffffffffffffc",16),l=new a.a("5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b",16),p=new a.a("ffffffff00000001000000000000000000000000ffffffffffffffffffffffff",16);function d(t,e){return s.curve.point(t,e,!1)}function b(t){return d(t.getX(),p.sub(t.getY()))}function h(t,e,n){t=t.umod(n);var r=new a.a(1),i=t.clone();while(!e.isZero()){var s=e.umod(new a.a(2));e=e.div(new a.a(2)),s.isZero()||(r=r.mul(i).umod(n)),i=i.mul(i).umod(n)}return r}function f(t,e){var n=h(t,new a.a(3),p);return n=n.add(t.mul(u).umod(p)).umod(p),n=n.add(l).umod(p),n=h(n,p.add(new a.a(1)).div(new a.a(4)),p),n.add(new a.a(e)).isEven()?n:p.sub(n)}function v(t){return t.getY().isEven()?{x:g(t,"x"),pre:"02"}:{x:g(t,"x"),pre:"03"}}function y(t,e){return d(new a.a(t.slice(2),16),f(new a.a(t.slice(2),16),e))}function g(t,e){var n="x"===e?t.getX().toString(16,32):t.getY().toString(16,32);return"0x"+n}},3617:function(t,e,n){"use strict";n.d(e,"g",(function(){return K})),n.d(e,"h",(function(){return H})),n.d(e,"c",(function(){return it})),n.d(e,"e",(function(){return je})),n.d(e,"a",(function(){return Ce})),n.d(e,"d",(function(){return re})),n.d(e,"j",(function(){return ze})),n.d(e,"f",(function(){return qe})),n.d(e,"b",(function(){return vn})),n.d(e,"i",(function(){return f}));var r=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"not-found"},[r("img",{attrs:{src:n("500a")}}),r("router-link",{staticClass:"bottom",attrs:{tag:"div",to:"/"}},[t._v(" Back Home ")])],1)},a=[],i=n("d4ec"),s=n("262e"),o=n("2caf"),c=n("9ab4"),u=n("60a3"),l=function(t){Object(s["a"])(n,t);var e=Object(o["a"])(n);function n(){return Object(i["a"])(this,n),e.apply(this,arguments)}return n}(u["g"]);l=Object(c["a"])([u["a"]],l);var p=l,d=p,b=(n("9b72"),n("0c7c")),h=Object(b["a"])(d,r,a,!1,null,"59f4d347",null),f=h.exports,v=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"zkp-layout"},[n("a",{staticClass:"github-corner",attrs:{href:"https://github.com/vechain-community/zkpvote-ui",target:"_blank"}}),n("Header"),t._t("default"),n("Footer")],2)},y=[],g=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("router-link",{staticClass:"zkp-header",attrs:{tag:"header",to:"/"}},[t._v("ZKPVOTE")])},m=[],j=function(t){Object(s["a"])(n,t);var e=Object(o["a"])(n);function n(){return Object(i["a"])(this,n),e.apply(this,arguments)}return n}(u["g"]);j=Object(c["a"])([u["a"]],j);var O=j,x=O,k=(n("2815"),Object(b["a"])(x,g,m,!1,null,"35ecd628",null)),w=k.exports,_=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("footer",{staticClass:"zkp-footer"},[n("a",{attrs:{href:"https://www.vechain.org",target:"_blank"}},[t._v("Â© VeChain Foundation "+t._s(t.year))]),n("span",[t._v("Powered by VeChain")])])},T=[],C=n("bee2"),D=n("5a0c"),S=n.n(D),R=function(t){Object(s["a"])(n,t);var e=Object(o["a"])(n);function n(){return Object(i["a"])(this,n),e.apply(this,arguments)}return Object(C["a"])(n,[{key:"year",get:function(){return S()().format("YYYY")}}]),n}(u["g"]);R=Object(c["a"])([u["a"]],R);var E=R,P=E,I=(n("7b8e"),Object(b["a"])(P,_,T,!1,null,"4f4a18e4",null)),z=I.exports,B=function(t){Object(s["a"])(n,t);var e=Object(o["a"])(n);function n(){return Object(i["a"])(this,n),e.apply(this,arguments)}return n}(u["g"]);B=Object(c["a"])([Object(u["a"])({components:{Header:w,Footer:z}})],B);var A=B,V=A,M=(n("b06f"),Object(b["a"])(V,v,y,!1,null,"7d72b548",null)),K=M.exports,Y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("main",{staticClass:"zkp-main",class:t.className},[t._t("default")],2)},N=[],$=function(t){Object(s["a"])(n,t);var e=Object(o["a"])(n);function n(){return Object(i["a"])(this,n),e.apply(this,arguments)}return Object(C["a"])(n,[{key:"width",get:function(){return window.innerWidth}}]),n}(u["g"]);Object(c["a"])([Object(u["d"])({type:String,default:""})],$.prototype,"className",void 0),$=Object(c["a"])([u["a"]],$);var L=$,X=L,F=(n("2525"),Object(b["a"])(X,Y,N,!1,null,"962837d8",null)),H=F.exports,U=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"zkp-authority"},[n("h2",{staticClass:"zkp-authority__title"},[t._v(" DO NOT CLOSE THIS PAGE ")]),n("p",{staticClass:"zkp-authority__tips"},[t._v(" Save the authority key above. You need tally the vote result after the vote is end with the key. Each new vote will generate an authority key. ")]),n("div",{staticClass:"zkp-authority__flex"},[n("div",{staticClass:"zkp-authority__key"},[n("span",{staticClass:"label"},[t._v("Authority Key")]),n("span",{staticClass:"text"},[t._v(t._s(t.authorityKey))])]),n("button",{staticClass:"zkp-authority__download",attrs:{type:"button"},on:{click:t.downloadAuthorityKey}},[t._v(" Download ")])]),n("div",{staticClass:"zkp-authority__radio"},[n("Radio",{attrs:{label:!0},model:{value:t.agree,callback:function(e){t.agree=e},expression:"agree"}},[t._v("I have downloaded the key")])],1),n("Button",{staticClass:"zkp-authority__button",attrs:{width:"230px",disabled:!t.agree},on:{click:t.open}},[t._v(" Active the vote ")])],1)},q=[],G=(n("99af"),n("b0c0"),n("ac1f"),n("5319"),n("b5d8"),n("450d"),n("f494")),J=n.n(G),Z=n("3691"),W=n("21a6"),Q=n.n(W),tt=n("4bb5"),et=function(t){Object(s["a"])(n,t);var e=Object(o["a"])(n);function n(){var t;return Object(i["a"])(this,n),t=e.apply(this,arguments),t.agree=!1,t}return Object(C["a"])(n,[{key:"open",value:function(){return!0}},{key:"downloadAuthorityKey",value:function(){var t=new Blob([this.authorityKey],{type:"text/plain;charset=utf-8"});Q.a.saveAs(t,"AuthorityKey_".concat(this.name.substring(0,25).replace(/\s+/g,"_"),"_proposed_by_").concat(this.signer.substring(0,8),".txt"))}}]),n}(u["g"]);Object(c["a"])([Object(tt["b"])("signer")],et.prototype,"signer",void 0),Object(c["a"])([Object(u["d"])({default:"",type:String})],et.prototype,"authorityKey",void 0),Object(c["a"])([Object(u["d"])({default:"",type:String})],et.prototype,"name",void 0),Object(c["a"])([Object(u["b"])()],et.prototype,"open",null),et=Object(c["a"])([Object(u["a"])({components:{Main:H,Button:Z["b"],Avatar:Z["a"],Radio:J.a}})],et);var nt=et,rt=nt,at=(n("1737"),Object(b["a"])(rt,U,q,!1,null,"dcc85830",null)),it=at.exports,st=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"zkp-detail"},[n("Avatar"),-1!==t.endTime?n("p",{staticClass:"zkp-detail__endTime"},[t._v(" End in "+t._s(t.formatEndTime())+" ")]):t._e(),n("p",{staticClass:"zkp-detail__by"},[t._v(" Proposed by: "),n("a",{attrs:{href:"https://explore-testnet.vechain.org/accounts/"+t.proposedBy,target:"_blank"}},[t._v(" "+t._s(t._f("ellipsis")(t.proposedBy))+" ")])]),"topic"in t.topicDetail?[n("h2",{staticClass:"zkp-detail__title"},[t._v(" "+t._s(t.topicDetail.topic)+" "),-1!==t.status?[n("Tag",{attrs:{type:t.statusMap[t.status].type}},[t._v(t._s(t.statusMap[t.status].label))])]:t._e()],2),t.status<2?n("RadioGroup",{attrs:{disabled:1!==t.status},model:{value:t.option,callback:function(e){t.option=e},expression:"option"}},[t._l(t.topicDetail.choices,(function(e,r){return[n("Radio",{key:e,attrs:{label:r+1}},[t._v(t._s(e))])]}))],2):t._e()]:t._e(),t.status>1?[n("div",{staticClass:"zkp-detail__result"},[n("div",{staticClass:"item"},[n("div",{staticClass:"label"},[n("span",{staticClass:"option"},[t._v(t._s(t.topicDetail.choices[0]))]),3===t.status?[n("span",{staticClass:"votes"},[t._v(t._s(t.result.yes)+" votes, "+t._s(t.percentage(t.result.yes))+"%")])]:[n("span",{staticClass:"votes"},[t._v("- votes")])]],2),n("div",{staticClass:"track"},[3===t.status?n("div",{staticClass:"progress",style:{width:t.percentage(t.result.yes)+"%"}}):t._e()])]),n("div",{staticClass:"item"},[n("div",{staticClass:"label"},[n("span",{staticClass:"option"},[t._v(t._s(t.topicDetail.choices[1]))]),3===t.status?[n("span",{staticClass:"votes"},[t._v(" "+t._s(t.result.no)+" votes, "+t._s(t.percentage(t.result.no))+"% ")])]:[n("span",{staticClass:"votes"},[t._v("- votes")])]],2),n("div",{staticClass:"track"},[3===t.status?n("div",{staticClass:"progress",style:{width:t.percentage(t.result.no)+"%"}}):t._e()])])])]:t._e(),1===t.status?[n("Button",{staticClass:"zkp-detail__button",attrs:{size:"sm",width:"230px",disabled:!t.option},on:{click:t.handleVoteAction}},[t._v(" Vote ")]),n("p",{staticClass:"zkp-detail__noSelf"},[t._v(" The voting results will be announced after the voting ends ")])]:t._e(),2===t.status?[n("p",{staticClass:"zkp-detail__noSelf"},[t._v(" The result will be counted and upload by the author ")]),t.proposedBy===t.signer?n("Button",{staticClass:"zkp-detail__tally",attrs:{width:"282px"},on:{click:t.handleTally}},[n("span",[t._v("Tally")]),n("small",[t._v("Calculate the result")])]):t._e()]:t._e(),3===t.status?[n("Button",{staticClass:"zkp-detail__tally",attrs:{width:"230px",size:"sm",disabled:!t.txID},on:{click:t.verifyTallyRes}},[t._v(" Verify the result ")])]:t._e(),n("DialogVote",{attrs:{visible:t.visible,printData:t.printData,loading:t.voteIsLoading,authorityKey:t.authorityKey,name:t.topicDetail.topic},on:{close:t.handleClose}}),n("DialogTally",{attrs:{visible:t.visibleTally,authPubKey:t.authPubKey},on:{close:t.handleTallyClose}}),n("DialogResult",{attrs:{visible:t.visibleResult,printData:t.printData2,txID:t.txID,loading:t.resultLoading,code:JSON.stringify({voteid:this.voteID,choice1:this.result.yes,choice2:this.result.no,valid:this.result.valid,invlid:this.result.invalid},null,2)},on:{close:t.handleResultClose}})],2)},ot=[],ct=(n("fb6a"),n("a9e3"),n("b680"),n("fe07"),n("6ac5")),ut=n.n(ct),lt=(n("96cf"),n("1da1")),pt=n("d257"),dt=n("32b1"),bt=n("399f"),ht=n.n(bt),ft=n("4b3b"),vt=(n("d3b7"),n("25f0"),n("4c53"),n("d8fb")),yt=n("7d92");function gt(t){var e=t.a,n=t.address,r=t.v,a=t.gk;if(!Object(vt["isAddress"])(n))throw new Error("Invalid address");if(!Object(ft["a"])(e))throw new Error("Invalid private key a");if(!a.validate())throw new Error("Invalid public key gk");var i,s,o,c,u,l,p,d,b,h,f=dt["b"].mul(e),v=Object(ft["c"])();return r?(l=Object(ft["c"])(),p=Object(ft["c"])(),i=a.mul(e).add(dt["b"]),c=dt["b"].mul(v),u=a.mul(v),s=dt["b"].mul(l.add(p.mul(e).umod(dt["d"])).umod(dt["d"])),o=a.mul(p.mul(e).umod(dt["d"]).add(l).umod(dt["d"])).add(dt["b"].mul(p)),h=new ht.a(yt.sha256().update(n.slice(2),"hex").update(f.getX().toString(16,32),"hex").update(f.getY().toString(16,32),"hex").update(i.getX().toString(16,32),"hex").update(i.getY().toString(16,32),"hex").update(s.getX().toString(16,32),"hex").update(s.getY().toString(16,32),"hex").update(o.getX().toString(16,32),"hex").update(o.getY().toString(16,32),"hex").update(c.getX().toString(16,32),"hex").update(c.getY().toString(16,32),"hex").update(u.getX().toString(16,32),"hex").update(u.getY().toString(16,32),"hex").digest("hex"),"hex"),b=h.sub(p),b=b.umod(dt["d"]),d=v.sub(b.mul(e).umod(dt["d"])),d=d.umod(dt["d"])):(d=Object(ft["c"])(),b=Object(ft["c"])(),i=a.mul(e),s=dt["b"].mul(v),o=a.mul(v),c=dt["b"].mul(d.add(b.mul(e).umod(dt["d"])).umod(dt["d"])),u=a.mul(b.mul(e).umod(dt["d"]).add(d).umod(dt["d"])).add(dt["b"].mul(dt["d"].sub(b))),h=new ht.a(yt.sha256().update(n.slice(2),"hex").update(f.getX().toString(16,32),"hex").update(f.getY().toString(16,32),"hex").update(i.getX().toString(16,32),"hex").update(i.getY().toString(16,32),"hex").update(s.getX().toString(16,32),"hex").update(s.getY().toString(16,32),"hex").update(o.getX().toString(16,32),"hex").update(o.getY().toString(16,32),"hex").update(c.getX().toString(16,32),"hex").update(c.getY().toString(16,32),"hex").update(u.getX().toString(16,32),"hex").update(u.getY().toString(16,32),"hex").digest("hex"),"hex"),p=h.sub(b),p=p.umod(dt["d"]),l=v.sub(p.mul(e).umod(dt["d"])).umod(dt["d"])),{address:n,ga:f,gk:a,y:i,d1:p,r1:l,d2:b,r2:d,a1:s,b1:o,a2:c,b2:u}}function mt(t){var e=t.address,n=t.ga,r=t.gk,a=t.y,i=t.d1,s=t.r1,o=t.d2,c=t.r2,u=t.a1,l=t.b1,p=t.a2,d=t.b2;if(!a.validate()||!n.validate()||!r.validate()||!u.validate()||!l.validate()||!p.validate()||!d.validate())return!1;if(!Object(ft["a"])(i)||!Object(ft["a"])(s)||!Object(ft["a"])(o)||!Object(ft["a"])(c))return!1;if(!Object(vt["isAddress"])(e))return!1;var b=new ht.a(yt.sha256().update(e.slice(2),"hex").update(n.getX().toString(16,32),"hex").update(n.getY().toString(16,32),"hex").update(a.getX().toString(16,32),"hex").update(a.getY().toString(16,32),"hex").update(u.getX().toString(16,32),"hex").update(u.getY().toString(16,32),"hex").update(l.getX().toString(16,32),"hex").update(l.getY().toString(16,32),"hex").update(p.getX().toString(16,32),"hex").update(p.getY().toString(16,32),"hex").update(d.getX().toString(16,32),"hex").update(d.getY().toString(16,32),"hex").digest("hex"),"hex");if(!b.eq(i.add(o).umod(dt["d"])))return!1;var h=dt["b"].mul(s).add(n.mul(i));if(!h.eq(u))return!1;var f=r.mul(s).add(a.mul(i));if(!f.eq(l))return!1;var v=dt["b"].mul(c).add(n.mul(o));return!!v.eq(p)}function jt(t){var e=t.a,n=t.gk,r=t.v,a=t.address,i=dt["b"].mul(e),s=n.mul(e);r&&(s=s.add(dt["b"]));var o=gt({address:a,gk:n,a:e,v:r});return{h:i,y:s,proof:o}}function Ot(t){var e=t.h,n=t.y,r=t.proof;return!(!e.validate()||!n.validate())&&mt(r)}function xt(t){var e=t.h,n=t.y,r=t.proof,a=r.d1,i=r.r1,s=r.d2,o=r.r2,c=r.a1,u=r.b1,l=r.a2,p=r.b2,d="0x";return d+=Object(dt["a"])(e).pre,d+=Object(dt["a"])(n).pre,d+=Object(dt["a"])(c).pre,d+=Object(dt["a"])(u).pre,d+=Object(dt["a"])(l).pre,d+=Object(dt["a"])(p).pre,{h:Object(dt["f"])(e,"x"),y:Object(dt["f"])(n,"x"),zkp:["0x"+a.toString(16,32),"0x"+i.toString(16,32),"0x"+s.toString(16,32),"0x"+o.toString(16,32),Object(dt["f"])(c,"x"),Object(dt["f"])(u,"x"),Object(dt["f"])(l,"x"),Object(dt["f"])(p,"x")],prefix:d}}function kt(t,e,n){for(var r=t.h,a=t.y,i=t.zkp,s=t.prefix,o=[],c=0;c<6;c++){var u=2*(5-c),l=s.slice(s.length-2-u,s.length-u);o.push("02"===l?"02":"03")}var p=Object(dt["g"])(a,o[1]),d=Object(dt["g"])(r,o[0]);return{h:d,y:p,proof:{address:e,gk:n,ga:d,y:p,d1:new ht.a(i[0].slice(2),16),r1:new ht.a(i[1].slice(2),16),d2:new ht.a(i[2].slice(2),16),r2:new ht.a(i[3].slice(2),16),a1:Object(dt["g"])(i[4],o[2]),b1:Object(dt["g"])(i[5],o[3]),a2:Object(dt["g"])(i[6],o[4]),b2:Object(dt["g"])(i[7],o[5])}}}var wt=n("79f6"),_t=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Dialog",{attrs:{center:"",title:"Encrypte your vote and upload",visible:t.visible,"close-on-click-modal":!t.loading,width:"600px","show-close":!t.loading},on:{close:t.close}},[t.printData.length?[n("Print",{attrs:{data:t.printData},on:{handleClick:t.handleDownload}})]:t._e(),n("a",{staticClass:"github-link",attrs:{href:"https://github.com/vechain-community/zkpvote-contracts/tree/master/contractV2",target:"_blank"}},[n("span"),t._v(" See more details ")]),n("Button",{attrs:{colorType:"dark",width:"200px",size:"sm",loading:t.loading},on:{click:t.close}},[t._v(" Done ")])],2)},Tt=[],Ct=(n("a7cc"),n("df33")),Dt=n.n(Ct),St=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"zkp-print"},t._l(t.data,(function(e){return n("div",{key:e.desc},[["success","error"].includes(e.tag)?n("p",{class:e.tag,domProps:{innerHTML:t._s(e.desc)},on:{click:t.handleClick}}):n("p",[n("span",{class:e.tag},[t._v("["+t._s(e.tag)+"]")]),n("span",{domProps:{innerHTML:t._s(e.desc)}})])])})),0)},Rt=[],Et=function(t){Object(s["a"])(n,t);var e=Object(o["a"])(n);function n(){return Object(i["a"])(this,n),e.apply(this,arguments)}return Object(C["a"])(n,[{key:"handleClick",value:function(t){t.target&&"STRONG"===t.target.nodeName&&this.$emit("handleClick")}}]),n}(u["g"]);Object(c["a"])([Object(u["d"])({type:Array,default:function(){return[]}})],Et.prototype,"data",void 0),Et=Object(c["a"])([u["a"]],Et);var Pt=Et,It=Pt,zt=(n("61f3"),Object(b["a"])(It,St,Rt,!1,null,"7075eca6",null)),Bt=zt.exports,At=function(t){Object(s["a"])(n,t);var e=Object(o["a"])(n);function n(){return Object(i["a"])(this,n),e.apply(this,arguments)}return Object(C["a"])(n,[{key:"close",value:function(){return!1}},{key:"handleDownload",value:function(){var t=new Blob([this.authorityKey],{type:"text/plain;charset=utf-8"});Q.a.saveAs(t,"AuthorityKey_".concat(this.name.substring(0,25).replace(/\s+/g,"_"),"_voted_by_").concat(this.signer.substring(0,8),".txt"))}}]),n}(u["g"]);Object(c["a"])([Object(tt["b"])("signer")],At.prototype,"signer",void 0),Object(c["a"])([Object(u["d"])({type:Boolean,default:!1})],At.prototype,"visible",void 0),Object(c["a"])([Object(u["d"])({type:Boolean,default:!0})],At.prototype,"loading",void 0),Object(c["a"])([Object(u["d"])({type:String,default:!0})],At.prototype,"authorityKey",void 0),Object(c["a"])([Object(u["d"])({type:String,default:!0})],At.prototype,"name",void 0),Object(c["a"])([Object(u["d"])({type:Array,default:function(){return[]}})],At.prototype,"printData",void 0),Object(c["a"])([Object(u["b"])()],At.prototype,"close",null),At=Object(c["a"])([Object(u["a"])({components:{Button:Z["b"],Dialog:Dt.a,Print:Bt}})],At);var Vt=At,Mt=Vt,Kt=(n("4301"),Object(b["a"])(Mt,_t,Tt,!1,null,"2c83cc5a",null)),Yt=Kt.exports,Nt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Dialog",{attrs:{center:"",visible:t.visible,"close-on-click-modal":!t.isShow||t.result,width:"675px","show-close":!t.isShow||t.result},on:{close:t.close}},[n("h3",{staticStyle:{margin:"0"},attrs:{slot:"title"},slot:"title"},[t._v("Tally")]),t.authorityKey?t._e():[n("Upload",{attrs:{drag:"",action:"","before-upload":t.handleBeforeUpload,accept:".txt"}},[n("i",{staticClass:"el-icon-upload"}),n("div",{staticClass:"el-upload__text"},[t._v("Upload the authority key generated when active this vote")])])],t.authorityKey?[n("div",{staticClass:"authority"},[n("span",[t._v("Authority Key")]),n("span",[t._v(t._s(t.authorityKey))])])]:t._e(),t.authorityKey&&!t.isShow?[n("CustomButton",{staticStyle:{margin:"52px auto"},attrs:{colorType:"dark",width:"310",size:"sm"},on:{click:t.handleUploadResult}},[t._v(" Calculate and upload result ")])]:t._e(),t.printData.length?[n("Print",{attrs:{data:t.printData}})]:t._e(),t.isShow?[n("a",{staticClass:"github-link",attrs:{href:"https://github.com/vechain-community/zkpvote-contracts/tree/master/contractV2",target:"_blank"}},[n("span"),t._v(" See more details ")]),n("CustomButton",{attrs:{colorType:"dark",width:"200px",size:"sm",loading:!t.result},on:{click:t.close}},[t._v(" Done ")])]:t._e()],2)},$t=[],Lt=(n("498a"),n("1951"),n("eedf")),Xt=n.n(Lt),Ft=(n("f225"),n("89a9")),Ht=n.n(Ft),Ut=(n("6062"),n("3ca3"),n("ddb0"),n("7d92"));function qt(t){var e=t.address,n=t.x,r=t.h,a=t.y;if(!Object(vt["isAddress"])(e))throw new Error("Invalid address");if(!Object(ft["a"])(n))throw new Error("Invalid private key");if(!r.validate())throw new Error("Invalid base h");if(!a.validate()||!a.eq(r.mul(n)))throw new Error("Invalid exp y");var i=Object(ft["c"])(),s=r.mul(i),o=new ht.a(Ut.sha256().update(e.slice(2),"hex").update(r.getX().toString(16,32),"hex").update(r.getY().toString(16,32),"hex").update(a.getX().toString(16,32),"hex").update(a.getY().toString(16,32),"hex").update(s.getX().toString(16,32),"hex").update(s.getY().toString(16,32),"hex").digest("hex"),"hex"),c=i.sub(o.mul(n).umod(dt["d"])).umod(dt["d"]);return{address:e,h:r,y:a,t:s,r:c}}var Gt=function(){function t(e,n){if(Object(i["a"])(this,t),!Object(ft["a"])(e))throw new Error("Invalid private key");if(!Object(vt["isAddress"])(n))throw new Error("Invalid account address");this.k=e,this.address=n,this.validSet=new Set,this.invalidSet=new Set,this.invalids=[],this.H=Object(dt["e"])(new ht.a(0),new ht.a(0)),this.Y=Object(dt["e"])(new ht.a(0),new ht.a(0))}return Object(C["a"])(t,[{key:"count",value:function(t){var e=t.proof.address;if(!Object(vt["isAddress"])(e))throw new Error("Invalid account address");this.invalidSet.has(e)||this.validSet.has(e)||(Ot(t)?(this.H.getX().isZero()?(this.H=t.h,this.Y=t.y):(this.H=this.H.add(t.h),this.Y=this.Y.add(t.y)),this.validSet.add(e)):(this.invalidSet.add(e),this.invalids.push(e)))}},{key:"getRes",value:function(){if(this.H.getX().isZero())throw new Error("No valid ballot counted");var t=this.H.mul(this.k),e=qt({address:this.address,h:this.H,y:t,x:this.k}),n=0,r=this.validSet.size;if(!t.eq(this.Y)){var a=this.Y.add(Object(dt["c"])(t));for(n=1;n<=r;n++)if(a.eq(dt["b"].mul(new ht.a(n))))break}return{V:n,X:t,Y:this.Y,proof:e,invalidBallots:this.invalids,total:this.validSet.size+this.invalidSet.size}}}]),t}();function Jt(t){var e=t.V,n=t.X,r=t.Y,a=t.proof,i=a.h,s=a.t,o=a.r,c="0x";return c+=Object(ft["b"])(Object(dt["f"])(n,"y")),c+=Object(ft["b"])(Object(dt["f"])(r,"y")),c+=Object(ft["b"])(Object(dt["f"])(i,"y")),c+=Object(ft["b"])(Object(dt["f"])(s,"y")),{V:e,X:Object(dt["f"])(n,"x"),Y:Object(dt["f"])(r,"x"),zkp:[Object(dt["f"])(i,"x"),Object(dt["f"])(s,"x"),"0x"+o.toString(16,32)],prefix:c,invalidBallots:t.invalidBallots}}var Zt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"zkp-format",class:["zkp-format__"+t.type]},[n("code",[t._v(" "+t._s(t.data)+" ")])])},Wt=[],Qt=function(t){Object(s["a"])(n,t);var e=Object(o["a"])(n);function n(){return Object(i["a"])(this,n),e.apply(this,arguments)}return n}(u["g"]);Object(c["a"])([Object(u["d"])({type:String,default:""})],Qt.prototype,"data",void 0),Object(c["a"])([Object(u["d"])({type:String,default:"light"})],Qt.prototype,"type",void 0),Qt=Object(c["a"])([u["a"]],Qt);var te=Qt,ee=te,ne=(n("319d"),Object(b["a"])(ee,Zt,Wt,!1,null,"0a4104d6",null)),re=ne.exports,ae=function(t){Object(s["a"])(n,t);var e=Object(o["a"])(n);function n(){var t;return Object(i["a"])(this,n),t=e.apply(this,arguments),t.printData=[],t.authorityKey="",t.isShow=!1,t.result=!1,t.completed=!1,t}return Object(C["a"])(n,[{key:"handleBeforeUpload",value:function(t){var e=this,n=new FileReader;return n.onloadend=function(){n.result&&"string"===typeof n.result&&(e.authorityKey=n.result.trim())},n.readAsText(t),!1}},{key:"getCompressedBallot",value:function(t){return{h:Object(ft["d"])(t[0],10),y:Object(ft["d"])(t[1],10),zkp:[Object(ft["d"])(t[2][0],10),Object(ft["d"])(t[2][1],10),Object(ft["d"])(t[2][2],10),Object(ft["d"])(t[2][3],10),Object(ft["d"])(t[2][4],10),Object(ft["d"])(t[2][5],10),Object(ft["d"])(t[2][6],10),Object(ft["d"])(t[2][7],10)],prefix:Object(ft["d"])(t[3],10)}}},{key:"handleUploadResult",value:function(){var t=Object(lt["a"])(regeneratorRuntime.mark((function t(){var e,n,r,a,i,s,o,c,u,l,p,d,b,h,f,v,y;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,Object(pt["f"])()){t.next=3;break}throw Error("Connection Error");case 3:if(Object(pt["g"])()){t.next=5;break}throw Error("ZKPVote only runs in Testnet");case 5:if(!this.isShow){t.next=7;break}return t.abrupt("return",!1);case 7:if(this.isShow=!0,e=new ht.a(this.authorityKey.slice(2),"hex"),n=dt["b"].mul(e),Object(ft["d"])(n.getX()).slice(2)===this.authPubKey.slice(2,66)||Object(ft["d"])(n.getY()).slice(2)===this.authPubKey.slice(66,130)){t.next=12;break}throw Error("Wrong vote key");case 12:return r=Object(dt["e"])(new ht.a("".concat(this.authPubKey.slice(2,66)),"hex"),new ht.a("".concat(this.authPubKey.slice(66,130)),"hex")),this.printData.push({tag:"website",desc:"Perform Elliptic Curve calculations with Authority Key to get GK"}),t.next=16,Object(pt["d"])(300);case 16:return this.printData.push({tag:"website",desc:"Calling contract to get result"}),t.next=19,Object(pt["d"])(300);case 19:return this.printData.push({tag:"contract",desc:"Get all compressed votes"}),t.next=22,Object(pt["d"])(300);case 22:return this.printData.push({tag:"website",desc:"Uncompress all votes with GK"}),t.next=25,wt["a"].getNumVoter(this.voteID);case 25:if(a=t.sent,i={V:0,X:"0x0",Y:"0x0",zkp:["0x0","0x0","0x0"],prefix:"0x0",invalidBallots:[]},!(a>0)){t.next=43;break}s=new Gt(e,this.signer),o=0;case 30:if(!(o<+a)){t.next=42;break}return t.next=33,wt["a"].getVoter(this.voteID,o);case 33:if(c=t.sent,!c){t.next=39;break}return t.next=37,wt["a"].getBallot(this.voteID,c);case 37:u=t.sent,u&&u.decoded&&(l=this.getCompressedBallot(u.decoded),p=kt(l,c,r),s.count(p));case 39:o++,t.next=30;break;case 42:i=Jt(s.getRes());case 43:return t.next=45,Object(pt["d"])(300);case 45:return this.printData.push({tag:"contract",desc:"Group valid and invalid votes"}),t.next=48,Object(pt["d"])(300);case 48:return this.printData.push({tag:"contract",desc:"Group by votes option"}),t.next=51,Object(pt["d"])(300);case 51:return t.next=53,wt["a"].Tally(this.signer,[this.voteID,i.invalidBallots,i.V,i.X,i.Y,i.zkp,i.prefix]);case 53:if(d=t.sent,d){t.next=56;break}return t.abrupt("return",!1);case 56:return t.next=58,wt["a"].getTallyRes(this.voteID);case 58:b=t.sent,b&&(this.completed=!0,h=+b[0],f=+b[2],v=+b[1],y=h-v,this.printData.push({tag:"success",desc:"\n      Tally successfully!\n      **************************************************\n      Voting result:\n      Choice1: ".concat(f,"\n      Choice2: ").concat(y-f,"\n      Invalid votes: ").concat(v,"\n      ")})),this.result=!0,t.next=67;break;case 63:t.prev=63,t.t0=t["catch"](0),this.result=!0,this.$notify({type:"error",title:"Message",message:"".concat(t.t0.message||t.t0)});case 67:return t.abrupt("return",!1);case 68:case"end":return t.stop()}}),t,this,[[0,63]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"close",value:function(){return this.completed&&this.reload(),this.completed=!1,this.authorityKey="",this.isShow=!1,this.printData=[],this.result=!1,!1}},{key:"voteID",get:function(){return this.$route.params.voteID}}]),n}(u["g"]);Object(c["a"])([Object(u["c"])("reload")],ae.prototype,"reload",void 0),Object(c["a"])([Object(u["d"])({type:Boolean,default:!1})],ae.prototype,"visible",void 0),Object(c["a"])([Object(u["d"])({type:String,default:""})],ae.prototype,"authPubKey",void 0),Object(c["a"])([Object(tt["b"])("signer")],ae.prototype,"signer",void 0),Object(c["a"])([Object(u["b"])()],ae.prototype,"close",null),ae=Object(c["a"])([Object(u["a"])({components:{CustomButton:Z["b"],Dialog:Dt.a,CodeFormat:re,Upload:Ht.a,Button:Xt.a,Print:Bt}})],ae);var ie=ae,se=ie,oe=(n("a324"),Object(b["a"])(se,Nt,$t,!1,null,"4d2ae9ec",null)),ce=oe.exports,ue=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Dialog",{attrs:{center:"",visible:t.visible,"close-on-click-modal":!t.loading,"show-close":!t.loading,width:"600px"},on:{close:t.close}},[n("h3",{staticStyle:{margin:"0"},attrs:{slot:"title"},slot:"title"},[t._v("Result")]),n("CodeFormat",{attrs:{type:"dark",data:t.code}}),n("p",{staticClass:"txid"},[t._v(" TxID: "),n("a",{attrs:{target:"_blank",href:"https://explore-testnet.vechain.org/transactions/"+t.txID}},[t._v(t._s(t.txID))])]),n("h3",{staticClass:"title"},[t._v("Verify the result")]),t.printData.length?[n("Print",{attrs:{data:t.printData}})]:t._e(),n("a",{staticClass:"github-link",attrs:{href:"https://github.com/vechain-community/zkpvote-contracts/tree/master/contractV2",target:"_blank"}},[n("span"),t._v(" See more details ")]),n("Button",{attrs:{colorType:"dark",size:"sm",loading:t.loading},on:{click:t.close}},[t._v(" Done ")])],2)},le=[],pe=function(t){Object(s["a"])(n,t);var e=Object(o["a"])(n);function n(){return Object(i["a"])(this,n),e.apply(this,arguments)}return Object(C["a"])(n,[{key:"close",value:function(){return!1}}]),n}(u["g"]);Object(c["a"])([Object(u["d"])({type:Boolean,default:!1})],pe.prototype,"visible",void 0),Object(c["a"])([Object(u["d"])({type:Boolean,default:!1})],pe.prototype,"loading",void 0),Object(c["a"])([Object(u["d"])({type:String,default:""})],pe.prototype,"code",void 0),Object(c["a"])([Object(u["d"])({type:String,default:""})],pe.prototype,"txID",void 0),Object(c["a"])([Object(u["d"])({type:Array,default:function(){return[]}})],pe.prototype,"printData",void 0),Object(c["a"])([Object(u["b"])()],pe.prototype,"close",null),pe=Object(c["a"])([Object(u["a"])({components:{Button:Z["b"],Dialog:Dt.a,Print:Bt,CodeFormat:re}})],pe);var de=pe,be=de,he=(n("5fcd"),Object(b["a"])(be,ue,le,!1,null,"30b6bd80",null)),fe=he.exports,ve=function(t){Object(s["a"])(n,t);var e=Object(o["a"])(n);function n(){var t;return Object(i["a"])(this,n),t=e.apply(this,arguments),t.visible=!1,t.visibleTally=!1,t.visibleResult=!1,t.resultLoading=!1,t.option="",t.statusMap=[{type:"warning",label:"Pending"},{type:"default",label:"Voting"},{type:"ended",label:"Ended"},{type:"ended",label:"Ended"}],t.authorityKey="",t.tallyIsLoading=!1,t.voteIsLoading=!1,t.isCast=!1,t.txID="",t.result={valid:0,no:0,yes:0,invalid:0},t.printData=[],t.printData2=[],t}return Object(C["a"])(n,[{key:"formatEndTime",value:function(){return S.a.unix(+this.endTime).format("YYYY.MM.DD HH:mm")}},{key:"handleClose",value:function(t){this.authorityKey="",this.printData=[],this.visible=t,this.isCast&&this.reload()}},{key:"verifyTallyRes",value:function(){var t=Object(lt["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,!this.visibleResult){t.next=3;break}return t.abrupt("return",!1);case 3:return this.visibleResult=!0,this.resultLoading=!0,this.printData2.push({tag:"contract",desc:"Get the encrypted ballot"}),t.next=8,Object(pt["d"])(300);case 8:return this.printData2.push({tag:"contract",desc:"Parsing voting proof"}),t.next=11,Object(pt["d"])(300);case 11:return this.printData2.push({tag:"contract",desc:"Verify the zk proof"}),t.next=14,Object(pt["d"])(300);case 14:return this.printData2.push({tag:"contract",desc:"Perform Elliptic Curve calculations"}),t.next=17,Object(pt["d"])(300);case 17:return t.next=19,wt["a"].verifyTallyRes(this.voteID);case 19:return e=t.sent,this.resultLoading=!1,e&&(parseInt(e,16)?this.printData2.push({tag:"success",desc:"Result: Valid"}):this.printData2.push({tag:"error",desc:"Result: InValid"})),t.abrupt("return",!1);case 25:return t.prev=25,t.t0=t["catch"](0),this.visibleResult=!1,this.resultLoading=!1,this.printData=[],t.abrupt("return",this.$notify({type:"error",title:"Error",message:"".concat(t.t0.message||t.t0)}));case 31:case"end":return t.stop()}}),t,this,[[0,25]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"created",value:function(){var t=Object(lt["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(3!==this.status){t.next=8;break}return t.next=3,wt["a"].getTallyRes(this.voteID);case 3:return e=t.sent,t.next=6,wt["a"].setTallyResEvent(this.voteID);case 6:this.txID=t.sent,e&&(this.result.valid=+e[0]-+e[1],this.result.invalid=+e[1],this.result.yes=+e[2],this.result.no=this.result.valid-this.result.yes);case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"percentage",value:function(t){var e=0;return t>0&&(e=t/this.result.valid*100),e>=100&&(e=100),e.toFixed(2)}},{key:"handleTally",value:function(){this.visibleTally=!0}},{key:"handleTallyClose",value:function(t){this.visibleTally=t}},{key:"handleResultClose",value:function(t){this.visibleResult=t,this.printData2=[]}},{key:"handleVoteAction",value:function(){var t=Object(lt["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.signer){t.next=5;break}return t.next=3,this.handleLogin();case 3:t.next=7;break;case 5:return t.next=7,this.handleVote();case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"handleLogin",value:function(){var t=Object(lt["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,Object(pt["f"])()){t.next=3;break}throw Error("Connection Error");case 3:if(Object(pt["g"])()){t.next=5;break}throw Error("ZKPVote only runs in Testnet");case 5:if(!(1e3*+this.endTime<(new Date).getTime())){t.next=7;break}throw Error("Fail to vote. The vote is ended");case 7:return t.next=9,wt["a"].login();case 9:return e=t.sent,e&&(sessionStorage.setItem("signer",e),this.setSigner(e),this.reload()),t.abrupt("return",!1);case 14:return t.prev=14,t.t0=t["catch"](0),t.abrupt("return",this.$notify({type:"error",title:"Message",message:"".concat(t.t0.message||t.t0)}));case 17:case"end":return t.stop()}}),t,this,[[0,14]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"handleVote",value:function(){var t=Object(lt["a"])(regeneratorRuntime.mark((function t(){var e,n,r,a,i,s,o=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,Object(pt["f"])()){t.next=3;break}throw Error("Connection Error");case 3:if(Object(pt["g"])()){t.next=5;break}throw Error("ZKPVote only runs in Testnet");case 5:if(!(1e3*+this.endTime<(new Date).getTime())){t.next=7;break}throw Error("Fail to vote. The vote is ended");case 7:return this.visible=!0,this.voteIsLoading=!0,this.printData.push({tag:"website",desc:"Get your option"}),t.next=12,Object(pt["d"])(300);case 12:return e=Object(dt["e"])(new ht.a("".concat(this.authPubKey.slice(2,66)),"hex"),new ht.a("".concat(this.authPubKey.slice(66,130)),"hex")),this.printData.push({tag:"website",desc:"Generate private key"}),t.next=16,Object(pt["d"])(300);case 16:return n=Object(ft["c"])(),this.authorityKey=Object(ft["d"])(n),this.printData.push({tag:"website",desc:"Encrypted your option with the private key"}),t.next=21,Object(pt["d"])(300);case 21:return r=1===this.option,a=jt({a:n,gk:e,v:r,address:this.signer}),this.printData.push({tag:"website",desc:"Compress your vote"}),t.next=26,Object(pt["d"])(300);case 26:return i=xt(a),this.printData.push({tag:"browser",desc:"Send vote transaction"}),t.next=30,Object(pt["d"])(300);case 30:return this.printData.push({tag:"contract",desc:"Upload your encrypted & compressed vote"}),t.next=33,Object(pt["d"])(300);case 33:return t.next=35,wt["a"].cast(this.signer,[this.voteID,i.h,i.y,i.zkp,i.prefix]).catch((function(t){o.printData.push({tag:"error",desc:t})}));case 35:return s=t.sent,this.voteIsLoading=!1,s&&"signer"in s&&(this.isCast=!0,this.printData.push({tag:"success",desc:'\n            Vote successfully!\n            Your vote has been encrypted on the blockchain. No one else knows what you have voted. <strong @click="handleDownload">Download</strong> the vote key to decrypt your vote.\n          '})),t.abrupt("return",!1);case 41:return t.prev=41,t.t0=t["catch"](0),this.voteIsLoading=!1,t.abrupt("return",this.$notify({type:"error",title:"Message",message:"".concat(t.t0.message||t.t0)}));case 45:case"end":return t.stop()}}),t,this,[[0,41]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"voteID",get:function(){return this.$route.params.voteID}}]),n}(u["g"]);Object(c["a"])([Object(tt["a"])("setSigner")],ve.prototype,"setSigner",void 0),Object(c["a"])([Object(u["c"])("reload")],ve.prototype,"reload",void 0),Object(c["a"])([Object(tt["b"])("signer")],ve.prototype,"signer",void 0),Object(c["a"])([Object(u["d"])({type:Number,default:0})],ve.prototype,"status",void 0),Object(c["a"])([Object(u["d"])({type:String,default:""})],ve.prototype,"proposedBy",void 0),Object(c["a"])([Object(u["d"])({type:String,default:""})],ve.prototype,"authPubKey",void 0),Object(c["a"])([Object(u["d"])()],ve.prototype,"endTime",void 0),Object(c["a"])([Object(u["d"])({type:Object,default:function(){return{}}})],ve.prototype,"topicDetail",void 0),ve=Object(c["a"])([Object(u["a"])({filters:{ellipsis:pt["e"],dayjs:S.a},components:{Avatar:Z["a"],Tag:Z["c"],Radio:J.a,RadioGroup:ut.a,Button:Z["b"],DialogVote:Yt,DialogTally:ce,DialogResult:fe}})],ve);var ye=ve,ge=ye,me=(n("48c7"),Object(b["a"])(ge,st,ot,!1,null,"6b1d9795",null)),je=me.exports,Oe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Dialog",{attrs:{center:"",title:"Active the vote",visible:t.visible,"close-on-click-modal":!t.loading,"show-close":!t.loading,width:"600px"},on:{close:t.close}},[t.printData.length?[n("Print",{attrs:{data:t.printData}})]:t._e(),n("a",{staticClass:"github-link",attrs:{href:"https://github.com/vechain-community/zkpvote-contracts/tree/master/contractV2",target:"_blank"}},[n("span"),t._v(" See more details ")]),n("Button",{attrs:{colorType:"dark",width:"200px",size:"sm",loading:t.loading},on:{click:t.close}},[t._v(" Done ")])],2)},xe=[],ke=function(t){Object(s["a"])(n,t);var e=Object(o["a"])(n);function n(){return Object(i["a"])(this,n),e.apply(this,arguments)}return Object(C["a"])(n,[{key:"close",value:function(){return!1}}]),n}(u["g"]);Object(c["a"])([Object(u["d"])({type:Boolean,default:!1})],ke.prototype,"visible",void 0),Object(c["a"])([Object(u["d"])({type:Boolean,default:!0})],ke.prototype,"loading",void 0),Object(c["a"])([Object(u["d"])({type:Array,default:function(){return[]}})],ke.prototype,"printData",void 0),Object(c["a"])([Object(u["b"])()],ke.prototype,"close",null),ke=Object(c["a"])([Object(u["a"])({components:{Button:Z["b"],Dialog:Dt.a,Print:Bt}})],ke);var we=ke,_e=we,Te=(n("53b1"),Object(b["a"])(_e,Oe,xe,!1,null,"5229912c",null)),Ce=Te.exports,De=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"zkp-share"},[n("h2",{staticClass:"zkp-share__title"},[t._v("Share the vote")]),n("div",{staticClass:"zkp-share__flex"},[n("div",{staticClass:"zkp-share__key"},[t._v(" "+t._s(t.shareUrl)+" ")]),n("button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:'\nJoin the vote "'+t.topic+'":\n'+t.shareUrl+"\n        ",expression:'`\nJoin the vote "${topic}":\n${shareUrl}\n        `',arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"zkp-share__download",attrs:{type:"button"}},[t._v(" Copy URL and share ")])])])},Se=[],Re=function(t){Object(s["a"])(n,t);var e=Object(o["a"])(n);function n(){return Object(i["a"])(this,n),e.apply(this,arguments)}return Object(C["a"])(n,[{key:"onCopy",value:function(){this.$notify({title:"Success",type:"success",message:"Copied to clipboard",duration:1e3})}},{key:"onError",value:function(){this.$notify({title:"Error",type:"error",message:"Failed to copy texts",duration:1e3})}},{key:"shareUrl",get:function(){return window.location.href}}]),n}(u["g"]);Object(c["a"])([Object(u["d"])({type:String})],Re.prototype,"topic",void 0),Re=Object(c["a"])([u["a"]],Re);var Ee=Re,Pe=Ee,Ie=(n("8f39"),Object(b["a"])(Pe,De,Se,!1,null,"0b49c4b3",null)),ze=Ie.exports,Be=function(){var t=this,e=t.$createElement,n=t._self._c||e;return 0!==t.status?n("div",{staticClass:"zkp-encrypted"},[n("h2",{staticClass:"zkp-encrypted__title"},[t._v("My Encrypted Vote")]),n("p",{staticClass:"zkp-encrypted__tips"},[t._v(" No one knows what you voted except yourself. "),n("span",{on:{click:t.handleOpen}},[t._v("Decrypt my vote")])]),n("CodeFormat",{attrs:{data:t.code}}),n("p",{staticClass:"zkp-encrypted__txid"},[t._v(" TxID: "),n("a",{attrs:{target:"_blank",href:"https://explore-testnet.vechain.org/transactions/"+t.txID}},[t._v(t._s(t.txID))])]),n("DialogDecrypt",{attrs:{code:t.code,visible:t.visible,txID:t.txID,authPubKey:t.authPubKey,choices:t.choices},on:{close:t.handleClose}})],1):t._e()},Ae=[],Ve=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Dialog",{attrs:{center:"",visible:t.visible,width:"730px"},on:{close:t.close}},[n("h3",{staticStyle:{margin:"0"},attrs:{slot:"title"},slot:"title"},[t._v("Decrypt your vote")]),n("CodeFormat",{attrs:{type:"dark",data:t.code}}),n("p",{staticClass:"txid"},[t._v(" TxID: "),n("a",{attrs:{target:"_blank",href:"https://explore-testnet.vechain.org/transactions/"+t.txID}},[t._v(t._s(t.txID))])]),t.authorityKey||t.voteResult.number?t._e():[n("Upload",{attrs:{drag:"",action:"","before-upload":t.handleBeforeUpload,accept:".txt"}},[n("i",{staticClass:"el-icon-upload"}),n("div",{staticClass:"el-upload__text"},[t._v("Upload the vote key generated when you voted")])])],t.isLoading?[n("Button",{staticClass:"loading",attrs:{loading:""}},[t._v("Decryptâ¦")])]:t._e(),t.voteResult.number?[n("div",{staticClass:"option"},[n("span",[t._v("Your option:")]),n("span",[t._v("Option"+t._s(t.voteResult.number)+", "+t._s(t.voteResult.choice))])]),n("a",{staticClass:"github-link",attrs:{href:"https://github.com/vechain-community/zkpvote-contracts/tree/master/contractV2",target:"_blank"}},[n("span"),t._v(" See more details ")]),n("CustomButton",{attrs:{colorType:"dark",width:"200px",size:"sm"},on:{click:t.close}},[t._v(" Done ")])]:t._e()],2)},Me=[],Ke=function(t){Object(s["a"])(n,t);var e=Object(o["a"])(n);function n(){var t;return Object(i["a"])(this,n),t=e.apply(this,arguments),t.printData=[],t.authorityKey="",t.isLoading=!1,t.voteResult={number:0,choice:""},t}return Object(C["a"])(n,[{key:"close",value:function(){return this.authorityKey="",this.isLoading=!1,this.voteResult={number:0,choice:""},!1}},{key:"getBallotContent",value:function(t,e,n){var r=e.mul(t);if(r.eq(n))return!1;if(r.add(dt["b"]).eq(n))return!0;throw new Error("Wrong vote key")}},{key:"getSelfVoteOption",value:function(){var t=Object(lt["a"])(regeneratorRuntime.mark((function t(){var e,n,r,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,e=new ht.a(this.authorityKey.slice(2),"hex"),n=Object(dt["e"])(new ht.a("".concat(this.authPubKey.slice(2,66)),"hex"),new ht.a("".concat(this.authPubKey.slice(66,130)),"hex")),r=JSON.parse(this.code),a=kt({h:Object(ft["d"])(r.h.substr(2),10),y:Object(ft["d"])(r.y.substr(2),10),zkp:[Object(ft["d"])(r.zkp[0].substr(2),10),Object(ft["d"])(r.zkp[1].substr(2),10),Object(ft["d"])(r.zkp[2].substr(2),10),Object(ft["d"])(r.zkp[3].substr(2),10),Object(ft["d"])(r.zkp[4].substr(2),10),Object(ft["d"])(r.zkp[5].substr(2),10),Object(ft["d"])(r.zkp[6].substr(2),10),Object(ft["d"])(r.zkp[7].substr(2),10)],prefix:Object(ft["d"])(r.prefix.substr(2),10)},this.signer,n),Ot(a)){t.next=7;break}throw Error("Wrong vote key");case 7:i=this.getBallotContent(e,n,a.y),void 0!==i&&(this.isLoading=!1,this.voteResult={number:i?1:2,choice:this.choices[i?0:1]}),t.next=16;break;case 11:t.prev=11,t.t0=t["catch"](0),this.isLoading=!1,this.authorityKey="",this.$notify({type:"error",title:"Error",message:t.t0.message||t.t0});case 16:case"end":return t.stop()}}),t,this,[[0,11]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"handleBeforeUpload",value:function(t){var e=this,n=new FileReader;return n.onloadend=function(){if(n.result&&"string"===typeof n.result){if(e.authorityKey=n.result.trim(),e.isLoading)return!1;e.isLoading=!0,e.getSelfVoteOption()}return!1},n.readAsText(t),!1}},{key:"voteID",get:function(){return this.$route.params.voteID}}]),n}(u["g"]);Object(c["a"])([Object(tt["b"])("signer")],Ke.prototype,"signer",void 0),Object(c["a"])([Object(u["d"])({type:Boolean,default:!1})],Ke.prototype,"visible",void 0),Object(c["a"])([Object(u["d"])({type:Boolean,default:!0})],Ke.prototype,"disabled",void 0),Object(c["a"])([Object(u["d"])({type:String,default:""})],Ke.prototype,"txID",void 0),Object(c["a"])([Object(u["d"])({type:String,default:""})],Ke.prototype,"authPubKey",void 0),Object(c["a"])([Object(u["d"])({type:String,default:!0})],Ke.prototype,"code",void 0),Object(c["a"])([Object(u["d"])({type:Array,default:function(){return[]}})],Ke.prototype,"choices",void 0),Object(c["a"])([Object(u["b"])()],Ke.prototype,"close",null),Ke=Object(c["a"])([Object(u["a"])({components:{CustomButton:Z["b"],Dialog:Dt.a,CodeFormat:re,Upload:Ht.a,Button:Xt.a}})],Ke);var Ye=Ke,Ne=Ye,$e=(n("953f"),Object(b["a"])(Ne,Ve,Me,!1,null,"03e54dd7",null)),Le=$e.exports,Xe=function(t){Object(s["a"])(n,t);var e=Object(o["a"])(n);function n(){var t;return Object(i["a"])(this,n),t=e.apply(this,arguments),t.visible=!1,t.code="",t}return Object(C["a"])(n,[{key:"created",value:function(){this.code=JSON.stringify(this.getCompressedBallot(this.voteResult.decoded),null,2)}},{key:"getCompressedBallot",value:function(t){return t?{h:"0x".concat(t[0]),y:"0x".concat(t[1]),zkp:["0x".concat(t[2][0]),"0x".concat(t[2][1]),"0x".concat(t[2][2]),"0x".concat(t[2][3]),"0x".concat(t[2][4]),"0x".concat(t[2][5]),"0x".concat(t[2][6]),"0x".concat(t[2][7])],prefix:"0x".concat(t[3])}:{}}},{key:"handleOpen",value:function(){this.visible=!0}},{key:"handleClose",value:function(){this.visible=!1}}]),n}(u["g"]);Object(c["a"])([Object(u["d"])({type:Number,default:0})],Xe.prototype,"status",void 0),Object(c["a"])([Object(u["d"])({type:Object,default:function(){return{}}})],Xe.prototype,"voteResult",void 0),Object(c["a"])([Object(u["d"])({type:String,default:""})],Xe.prototype,"txID",void 0),Object(c["a"])([Object(u["d"])({type:String,default:""})],Xe.prototype,"authPubKey",void 0),Object(c["a"])([Object(u["d"])({type:Array,default:function(){return[]}})],Xe.prototype,"choices",void 0),Xe=Object(c["a"])([Object(u["a"])({components:{CodeFormat:re,DialogDecrypt:Le}})],Xe);var Fe=Xe,He=Fe,Ue=(n("df6a"),Object(b["a"])(He,Be,Ae,!1,null,"5fd4e5ea",null)),qe=Ue.exports,Ge=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"zkp-votes"},[n("h2",{staticClass:"zkp-votes__title"},[n("span",[t._v("All Votes")]),n("span",{staticClass:"count"},[t._v(t._s(t.allVoteNumber))])]),n("Table",{staticClass:"zkp-votes__table",attrs:{data:t.listData,"empty-text":"No Records"}},[n("TableColumn",{attrs:{label:"Voters",prop:"address","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",{staticStyle:{display:"flex","align-items":"center"}},[n("div",{staticClass:"zkp-avatar__img",style:{background:"url('data:image/svg+xml;utf8,"+t.avatarImg(e.row.signer)+"')",backgroundSize:"cover"}}),n("p",{staticClass:"zkp-avatar__address"},[t._v(t._s(e.row.signer))])])]}}])}),n("TableColumn",{attrs:{label:"Txid",prop:"txID","show-overflow-tooltip":""}}),n("TableColumn",{attrs:{label:"Encrypted vote",prop:"address",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("Tooltip",{attrs:{content:"Verify the vote",placement:"top",effect:"dark"}},[n("div",{staticClass:"zkp-votes__control",on:{click:function(){return t.handleClick(e.row)}}})])]}}])})],1),t.data.length>10?[n("div",{staticClass:"zkp-votes__see_more",on:{click:t.handleClickSeeMore}},[t._v("See more")])]:t._e(),n("DialogVerify",{attrs:{code:t.code,visible:t.visible,printData:t.printData,loading:t.isLoading,txID:t.txID},on:{close:t.handleClose}})],2)},Je=[],Ze=(n("4de4"),n("7db0"),n("4160"),n("159b"),n("0c67"),n("299c")),We=n.n(Ze),Qe=(n("5466"),n("ecdf")),tn=n.n(Qe),en=(n("38a0"),n("ad41")),nn=n.n(en),rn=n("02d3"),an=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Dialog",{attrs:{center:"",visible:t.visible,"close-on-click-modal":!t.loading,"show-close":!t.loading,width:"730px"},on:{close:t.close}},[n("h3",{staticStyle:{margin:"0"},attrs:{slot:"title"},slot:"title"},[t._v("Encrypted vote")]),n("CodeFormat",{attrs:{type:"dark",data:t.code}}),n("p",{staticClass:"txid"},[t._v(" TxID: "),n("a",{attrs:{target:"_blank",href:"https://explore-testnet.vechain.org/transactions/"+t.txID}},[t._v(t._s(t.txID))])]),n("h3",{staticClass:"title"},[t._v("Verify the vote")]),t.printData.length?[n("Print",{attrs:{data:t.printData}})]:t._e(),n("a",{staticClass:"github-link",attrs:{href:"https://github.com/vechain-community/zkpvote-contracts/tree/master/contractV2",target:"_blank"}},[n("span"),t._v(" See more details ")]),n("Button",{attrs:{colorType:"dark",width:"200px",size:"sm",loading:t.loading},on:{click:t.close}},[t._v(" Done ")])],2)},sn=[],on=function(t){Object(s["a"])(n,t);var e=Object(o["a"])(n);function n(){return Object(i["a"])(this,n),e.apply(this,arguments)}return Object(C["a"])(n,[{key:"close",value:function(){return!1}}]),n}(u["g"]);Object(c["a"])([Object(u["d"])({type:Boolean,default:!1})],on.prototype,"visible",void 0),Object(c["a"])([Object(u["d"])({type:Boolean,default:!0})],on.prototype,"loading",void 0),Object(c["a"])([Object(u["d"])({type:String,default:""})],on.prototype,"code",void 0),Object(c["a"])([Object(u["d"])({type:String,default:""})],on.prototype,"txID",void 0),Object(c["a"])([Object(u["d"])({type:Array,default:function(){return[]}})],on.prototype,"printData",void 0),Object(c["a"])([Object(u["b"])()],on.prototype,"close",null),on=Object(c["a"])([Object(u["a"])({components:{Button:Z["b"],Dialog:Dt.a,Print:Bt,CodeFormat:re}})],on);var cn=on,un=cn,ln=(n("4aa3"),Object(b["a"])(un,an,sn,!1,null,"b4138058",null)),pn=ln.exports,dn=function(t){Object(s["a"])(n,t);var e=Object(o["a"])(n);function n(){var t;return Object(i["a"])(this,n),t=e.apply(this,arguments),t.visible=!1,t.seeMore=!1,t.allVoteNumber="",t.data=[],t.code="",t.txID="",t.offset=0,t.isLoading=!1,t.printData=[],t}return Object(C["a"])(n,[{key:"created",value:function(){this.getAllVoteNumber(),this.getAllVote()}},{key:"handleClickSeeMore",value:function(){this.seeMore=!0}},{key:"avatarImg",value:function(t){return Object(rn["picasso"])(t)}},{key:"getAllVoteNumber",value:function(){var t=Object(lt["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,wt["a"].getNumVoter(this.voteID);case 2:this.allVoteNumber=t.sent;case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getAllVote",value:function(){var t=Object(lt["a"])(regeneratorRuntime.mark((function t(){var e,n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,wt["a"].getCastBinaryBallot({id:this.voteID,from:this.offset});case 2:if(e=t.sent,e&&e.length){t.next=5;break}return t.abrupt("return",!1);case 5:return this.offset+=e.length,e.forEach((function(t){n.data.find((function(e){return e.signer===t.signer}))||n.data.push(t)})),this.getAllVote(),t.abrupt("return",!1);case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"handleClick",value:function(){var t=Object(lt["a"])(regeneratorRuntime.mark((function t(e){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.visible=!0,this.isLoading=!0,this.printData.push({tag:"contract",desc:"Get the encrypted ballot"}),t.next=5,Object(pt["d"])(300);case 5:return t.next=7,wt["a"].getBallot(this.voteID,e.signer);case 7:if(n=t.sent,!n){t.next=24;break}return this.txID=e.txID,this.printData.push({tag:"contract",desc:"Parsing voting proof"}),t.next=13,Object(pt["d"])(300);case 13:return this.code=JSON.stringify(this.getCompressedBallot(n.decoded,e.hash),null,2),this.printData.push({tag:"contract",desc:"Verify the zk proof"}),t.next=17,Object(pt["d"])(300);case 17:return this.printData.push({tag:"contract",desc:"Perform Elliptic Curve calculations"}),t.next=20,Object(pt["d"])(300);case 20:return t.next=22,wt["a"].verifyBallot(this.voteID,e.signer);case 22:r=t.sent,r&&r.decoded&&(r.decoded[0]?this.printData.push({tag:"success",desc:"Result: Valid"}):this.printData.push({tag:"error",desc:"Result: Invalid"}));case 24:this.isLoading=!1;case 25:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"getCompressedBallot",value:function(t,e){return t?{h:"0x".concat(t[0]),y:"0x".concat(t[1]),zkp:["0x".concat(t[2][0]),"0x".concat(t[2][1]),"0x".concat(t[2][2]),"0x".concat(t[2][3]),"0x".concat(t[2][4]),"0x".concat(t[2][5]),"0x".concat(t[2][6]),"0x".concat(t[2][7])],prefix:"0x".concat(t[3]),hash:e}:{}}},{key:"handleClose",value:function(t){this.printData=[],this.visible=t}},{key:"voteID",get:function(){return this.$route.params.voteID}},{key:"listData",get:function(){return this.seeMore?this.data:this.data.filter((function(t,e){return e<10}))}}]),n}(u["g"]);Object(c["a"])([Object(u["d"])({type:Number,default:0})],dn.prototype,"status",void 0),Object(c["a"])([Object(tt["b"])("signer")],dn.prototype,"signer",void 0),dn=Object(c["a"])([Object(u["a"])({components:{Table:nn.a,TableColumn:tn.a,DialogVerify:pn,Tooltip:We.a}})],dn);var bn=dn,hn=bn,fn=(n("0e1c"),Object(b["a"])(hn,Ge,Je,!1,null,"60294ded",null)),vn=fn.exports},3691:function(t,e,n){"use strict";n.d(e,"a",(function(){return O})),n.d(e,"b",(function(){return D})),n.d(e,"c",(function(){return B}));var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.signer?n("div",{staticClass:"zkp-avatar"},[n("div",{staticClass:"zkp-avatar__img",style:{background:"url('data:image/svg+xml;utf8,"+t.avatarImg+"')",backgroundSize:"contain"},on:{click:t.handleChangeSigner}}),n("div",[n("span",{staticClass:"zkp-avatar__text"},[t._v("Hi, ")]),n("router-link",{staticClass:"zkp-avatar__text",attrs:{to:"/my-proposal"}},[t._v(t._s(t._f("ellipsis")(t.signer)))])],1)]):t._e()},a=[],i=(n("96cf"),n("1da1")),s=n("d4ec"),o=n("bee2"),c=n("262e"),u=n("2caf"),l=n("9ab4"),p=n("02d3"),d=n("60a3"),b=n("4bb5"),h=n("d257"),f=n("79f6"),v=function(t){Object(c["a"])(n,t);var e=Object(u["a"])(n);function n(){return Object(s["a"])(this,n),e.apply(this,arguments)}return Object(o["a"])(n,[{key:"handleChangeSigner",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,Object(h["f"])()){t.next=3;break}throw Error("Connection Error");case 3:if(Object(h["g"])()){t.next=5;break}throw Error("ZKPVote only runs in Testnet");case 5:return t.next=7,f["a"].login();case 7:e=t.sent,e&&(sessionStorage.setItem("signer",e),this.setSigner(e),this.reload()),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](0),this.$notify({type:"error",title:"Error",message:"".concat(t.t0.message||t.t0)});case 14:case"end":return t.stop()}}),t,this,[[0,11]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"avatarImg",get:function(){return Object(p["picasso"])(this.signer)}}]),n}(d["g"]);Object(l["a"])([Object(b["b"])("signer")],v.prototype,"signer",void 0),Object(l["a"])([b["a"]],v.prototype,"setSigner",void 0),Object(l["a"])([Object(d["c"])("reload")],v.prototype,"reload",void 0),v=Object(l["a"])([Object(d["a"])({filters:{ellipsis:h["e"]}})],v);var y=v,g=y,m=(n("17ec"),n("0c7c")),j=Object(m["a"])(g,r,a,!1,null,"378fb0c1",null),O=j.exports,x=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{staticClass:"zkp-button",class:["zkp-button__"+t.size,"zkp-button__"+t.colorType,t.loading&&"zkp-button__loading"],style:{width:t.width},on:{click:function(e){return t.$emit("click",e)}}},[t._t("default"),n("div",{staticClass:"loading"})],2)},k=[],w=function(t){Object(c["a"])(n,t);var e=Object(u["a"])(n);function n(){return Object(s["a"])(this,n),e.apply(this,arguments)}return n}(d["g"]);Object(l["a"])([Object(d["d"])({type:String,default:"md"})],w.prototype,"size",void 0),Object(l["a"])([Object(d["d"])({type:String,default:"light"})],w.prototype,"colorType",void 0),Object(l["a"])([Object(d["d"])({type:String,default:"280px"})],w.prototype,"width",void 0),Object(l["a"])([Object(d["d"])({type:Boolean,default:!1})],w.prototype,"loading",void 0),w=Object(l["a"])([d["a"]],w);var _=w,T=_,C=(n("0aad"),Object(m["a"])(T,x,k,!1,null,"44c0c2b4",null)),D=C.exports,S=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"zkp-tag",class:["zkp-tag__"+t.type]},[t._t("default")],2)},R=[],E=function(t){Object(c["a"])(n,t);var e=Object(u["a"])(n);function n(){return Object(s["a"])(this,n),e.apply(this,arguments)}return n}(d["g"]);Object(l["a"])([Object(d["d"])({type:String,default:"default"})],E.prototype,"type",void 0),E=Object(l["a"])([d["a"]],E);var P=E,I=P,z=(n("9dd8"),Object(m["a"])(I,S,R,!1,null,"684e41df",null)),B=z.exports},"37d1":function(t,e,n){},4:function(t,e){},4301:function(t,e,n){"use strict";n("c4e4")},"48c7":function(t,e,n){"use strict";n("042f")},"4aa3":function(t,e,n){"use strict";n("7ed6")},"4b3b":function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"c",(function(){return c})),n.d(e,"b",(function(){return u})),n.d(e,"d",(function(){return l}));n("d3b7"),n("25f0");var r=n("1c46"),a=n("399f"),i=n.n(a),s=n("32b1");function o(t){return t.gt(new i.a(0))&&t.lt(s["d"])}function c(){for(;;){var t=new i.a(Object(r["randomBytes"])(32));if(o(t))return t}}function u(t){var e=parseInt(t.charAt(t.length-1),16);return e%2==0?"02":"03"}function l(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:32;if(n<=0||n%2!=0)throw new Error("Invalid hex string length");return"0x"+new i.a(t,e).toString("hex",n)}},"4b6b":function(t,e,n){},"4d91":function(t,e,n){},5:function(t,e){},"500a":function(t,e,n){t.exports=n.p+"img/bg.041e57b3.png"},"506b":function(t,e,n){},"53b1":function(t,e,n){"use strict";n("37d1")},"53bb":function(t,e,n){},5742:function(t,e,n){"use strict";n("b0b7")},"5fcd":function(t,e,n){"use strict";n("e082")},6:function(t,e){},"61f3":function(t,e,n){"use strict";n("506b")},7:function(t,e){},"786e":function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n("7dbf"),a=n.n(r),i=null;function s(){return i}i||(i=new a.a({node:"https://testnet.outofgas.io/",network:"test"}))},"79f6":function(t,e,n){"use strict";n.d(e,"a",(function(){return b}));n("4de4"),n("d81d"),n("fb6a"),n("d3b7");var r=n("5530"),a=n("2909"),i=(n("96cf"),n("1da1")),s=n("d4ec"),o=n("bee2"),c=n("786e"),u=n("5126"),l="0xb857ec3641ef2a7b9fc2ab4fbe3e65386df17253",p=[{inputs:[{internalType:"address",name:"_lib",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"id",type:"bytes32"},{indexed:!0,internalType:"address",name:"from",type:"address"}],name:"BeginTally",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"id",type:"bytes32"},{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!1,internalType:"bytes32",name:"ballotHash",type:"bytes32"}],name:"CastBinaryBallot",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"id",type:"bytes32"},{indexed:!0,internalType:"address",name:"from",type:"address"}],name:"EndTally",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"id",type:"bytes32"},{indexed:!0,internalType:"address",name:"from",type:"address"}],name:"NewBinaryVote",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"id",type:"bytes32"},{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!1,internalType:"uint256",name:"V",type:"uint256"},{indexed:!1,internalType:"bytes32",name:"tallyHash",type:"bytes32"}],name:"SetTallyRes",type:"event"},{inputs:[{internalType:"bytes32",name:"id",type:"bytes32"},{internalType:"uint256",name:"h",type:"uint256"},{internalType:"uint256",name:"y",type:"uint256"},{internalType:"uint256[8]",name:"zkp",type:"uint256[8]"},{internalType:"uint256",name:"prefix",type:"uint256"}],name:"cast",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"",type:"bytes32"}],name:"castEndTime",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"id",type:"bytes32"}],name:"endTally",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"id",type:"bytes32"}],name:"getAuthPubKey",outputs:[{internalType:"uint256[2]",name:"",type:"uint256[2]"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"id",type:"bytes32"},{internalType:"address",name:"a",type:"address"}],name:"getBallot",outputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256[8]",name:"",type:"uint256[8]"},{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"id",type:"bytes32"},{internalType:"uint256",name:"i",type:"uint256"}],name:"getNullVoter",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"id",type:"bytes32"}],name:"getNumNullVoter",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"a",type:"address"}],name:"getNumVote",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"id",type:"bytes32"}],name:"getNumVoter",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"id",type:"bytes32"}],name:"getState",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"id",type:"bytes32"}],name:"getTallyRes",outputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"id",type:"bytes32"},{internalType:"uint256",name:"i",type:"uint256"}],name:"getVoter",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"endTime",type:"uint256"},{internalType:"bytes32",name:"topicHash",type:"bytes32"},{internalType:"bytes32",name:"yesHash",type:"bytes32"},{internalType:"bytes32",name:"noHash",type:"bytes32"}],name:"newBinaryVote",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"",type:"bytes32"}],name:"optNo",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"",type:"bytes32"}],name:"optYes",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"id",type:"bytes32"},{internalType:"uint256",name:"_gk",type:"uint256"},{internalType:"uint8",name:"_gkPrefix",type:"uint8"}],name:"setAuthPubKey",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"id",type:"bytes32"},{internalType:"address[]",name:"nulls",type:"address[]"},{internalType:"uint256",name:"V",type:"uint256"},{internalType:"uint256",name:"X",type:"uint256"},{internalType:"uint256",name:"Y",type:"uint256"},{internalType:"uint256[3]",name:"zkp",type:"uint256[3]"},{internalType:"uint256",name:"prefix",type:"uint256"}],name:"setTallyRes",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"",type:"bytes32"}],name:"topics",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"id",type:"bytes32"},{internalType:"address",name:"a",type:"address"}],name:"verifyBallot",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"id",type:"bytes32"}],name:"verifyTallyRes",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"",type:"bytes32"}],name:"voteAuth",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"}],name:"voteID",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"}],d=Object(c["a"])(),b=function(){function t(){Object(s["a"])(this,t)}return Object(o["a"])(t,null,[{key:"getInstance",value:function(e){return t.instance||(t.instance=new t,t.contractAddress=e),t.instance}},{key:"transferMethod",value:function(t){return d.thor.account(l).method(u["utils"].getABI(p,t,"function"))}},{key:"transferEvent",value:function(t){return d.thor.account(l).event(u["utils"].getABI(p,t,"event"))}},{key:"getReceipt",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,n=d.thor.transaction(e),n){t.next=4;break}return t.abrupt("return",void 0);case 4:return t.abrupt("return",new Promise((function(t,e){var r,a=0,s=setInterval(Object(i["a"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(r){i.next=7;break}return a+=1,i.next=4,n.getReceipt();case 4:r=i.sent,r&&(clearInterval(s),t(r)),a>5&&(clearInterval(s),e("Transaction Reverted"));case 7:case"end":return i.stop()}}),i)}))),1e4)})));case 7:return t.prev=7,t.t0=t["catch"](0),t.abrupt("return",Promise.reject(t.t0.message||t.t0));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"signingService",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e,n,i){var s,o,c,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,s=this.transferMethod(e),s){t.next=4;break}return t.abrupt("return",void 0);case 4:if(o=s.asClause.apply(s,Object(a["a"])(i)),o){t.next=7;break}return t.abrupt("return",void 0);case 7:if(c=d.vendor.sign("tx",[Object(r["a"])({},o)]),c){t.next=10;break}return t.abrupt("return",void 0);case 10:return c.signer(n).gas(0).delegate("https://omg.outofgas.io:28050/sign?authorization=275ad8b3-20e5-4041-bced-98532423ed0d"),t.next=13,c.request();case 13:if(u=t.sent,u&&"txid"in u){t.next=16;break}return t.abrupt("return",void 0);case 16:return t.abrupt("return",Promise.resolve(u.txid));case 19:return t.prev=19,t.t0=t["catch"](0),t.abrupt("return",Promise.reject(t.t0.message||t.t0));case 22:case"end":return t.stop()}}),t,this,[[0,19]])})));function e(e,n,r){return t.apply(this,arguments)}return e}()},{key:"login",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,!("thor"in d)){e.next=18;break}if(n=d.thor.account(t.contractAddress),n){e.next=5;break}return e.abrupt("return",void 0);case 5:return e.next=7,n.getCode();case 7:if(r=e.sent,r&&"code"in r){e.next=10;break}return e.abrupt("return",void 0);case 10:if("0x"!==r.code){e.next=12;break}throw Error("You have selected an incompatible environment. Please change your node to proceed.");case 12:return e.next=14,d.vendor.sign("cert",{purpose:"identification",payload:{type:"text",content:"Wallet Authorization"}}).request();case 14:if(a=e.sent,a&&"annex"in a){e.next=17;break}return e.abrupt("return",void 0);case 17:return e.abrupt("return",Promise.resolve(a.annex.signer));case 18:return e.abrupt("return",void 0);case 21:return e.prev=21,e.t0=e["catch"](0),e.abrupt("return",Promise.reject(e.t0.message||e.t0));case 24:case"end":return e.stop()}}),e,null,[[0,21]])})));function n(){return e.apply(this,arguments)}return n}()},{key:"newProposal",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e,n){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.signingService("newBinaryVote",e,n);case 3:if(r=t.sent,r){t.next=6;break}return t.abrupt("return",void 0);case 6:return t.next=8,this.getReceipt(r);case 8:if(a=t.sent,!(null===a||void 0===a?void 0:a.reverted)){t.next=11;break}throw Error("Transaction Reverted");case 11:return t.abrupt("return",Promise.resolve({signer:e,txID:r,voteID:null===a||void 0===a?void 0:a.outputs[0].events[0].topics[1]}));case 14:return t.prev=14,t.t0=t["catch"](0),t.abrupt("return",Promise.reject(t.t0.message||t.t0));case 17:case"end":return t.stop()}}),t,this,[[0,14]])})));function e(e,n){return t.apply(this,arguments)}return e}()},{key:"setAuthPubKey",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e,n){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.signingService("setAuthPubKey",e,n);case 3:if(r=t.sent,r){t.next=6;break}return t.abrupt("return",void 0);case 6:return t.next=8,this.getReceipt(r);case 8:if(a=t.sent,!(null===a||void 0===a?void 0:a.reverted)){t.next=11;break}throw Error("Transaction Reverted");case 11:return t.abrupt("return",Promise.resolve({signer:e,txID:r}));case 14:return t.prev=14,t.t0=t["catch"](0),t.abrupt("return",Promise.reject(t.t0));case 17:case"end":return t.stop()}}),t,this,[[0,14]])})));function e(e,n){return t.apply(this,arguments)}return e}()},{key:"checkVoteIDexist",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.transferMethod("voteAuth").call(e);case 3:if(r=t.sent,r){t.next=6;break}return t.abrupt("return",void 0);case 6:if(!("data"in r)||0!==parseInt("".concat(r.data),16)){t.next=8;break}throw Error("VoteID does not exist");case 8:if(!(null===(n=r.decoded)||void 0===n?void 0:n.revertReason)){t.next=10;break}throw Error("".concat(null===(a=r.decoded)||void 0===a?void 0:a.revertReason));case 10:return t.abrupt("return",Promise.resolve("0x".concat(r.data.slice(26,66))));case 13:return t.prev=13,t.t0=t["catch"](0),t.abrupt("return",Promise.reject(t.t0.message||t.t0));case 16:case"end":return t.stop()}}),t,this,[[0,13]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"proposalStatus",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.transferMethod("getState").call(e);case 3:if(n=t.sent,n&&"data"in n){t.next=6;break}return t.abrupt("return",void 0);case 6:return t.abrupt("return",Promise.resolve(parseInt("".concat(n.data),16)));case 9:return t.prev=9,t.t0=t["catch"](0),t.abrupt("return",Promise.reject(t.t0.message||t.t0));case 12:case"end":return t.stop()}}),t,this,[[0,9]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"getAuthPubKey",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.transferMethod("getAuthPubKey").call(e);case 3:if(n=t.sent,n&&"data"in n&&"0x"!==n.data){t.next=6;break}return t.abrupt("return",void 0);case 6:return t.abrupt("return",Promise.resolve(n.data));case 9:return t.prev=9,t.t0=t["catch"](0),t.abrupt("return",Promise.reject(t.t0.message||t.t0));case 12:case"end":return t.stop()}}),t,this,[[0,9]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"getVoteDetail",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var n,r,a,i,s,o,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.id,r=e.fromAddress,a=e.from,i=void 0===a?0:a,s=e.limit,o=void 0===s?256:s,t.prev=1,t.next=4,this.transferEvent("NewBinaryVote").filter([{id:n,fromAddress:r}]).order("desc").apply(i,o);case 4:if(c=t.sent,c&&c.length){t.next=7;break}return t.abrupt("return",void 0);case 7:return t.abrupt("return",Promise.resolve(c.map((function(t){var e;return null===(e=t.decoded)||void 0===e?void 0:e.id}))));case 10:return t.prev=10,t.t0=t["catch"](1),t.abrupt("return",Promise.reject(t.t0.message||t.t0));case 13:case"end":return t.stop()}}),t,this,[[1,10]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"getBallot",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e,n){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.transferMethod("getBallot").call(e,n);case 3:if(r=t.sent,r&&"0x"!==r.data&&!r.reverted){t.next=6;break}return t.abrupt("return",void 0);case 6:return t.abrupt("return",Promise.resolve(r));case 9:return t.prev=9,t.t0=t["catch"](0),t.abrupt("return",Promise.reject(t.t0.message||t.t0));case 12:case"end":return t.stop()}}),t,this,[[0,9]])})));function e(e,n){return t.apply(this,arguments)}return e}()},{key:"cast",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e,n){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.signingService("cast",e,n);case 3:if(r=t.sent,r){t.next=6;break}return t.abrupt("return",void 0);case 6:return t.next=8,this.getReceipt(r);case 8:if(a=t.sent,!(null===a||void 0===a?void 0:a.reverted)){t.next=11;break}throw Error("Transaction Reverted");case 11:return t.abrupt("return",Promise.resolve({signer:e,txID:r}));case 14:return t.prev=14,t.t0=t["catch"](0),t.abrupt("return",Promise.reject(t.t0.message||t.t0));case 17:case"end":return t.stop()}}),t,this,[[0,14]])})));function e(e,n){return t.apply(this,arguments)}return e}()},{key:"getCastBinaryBallot",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var n,r,a,i,s,o,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.id,r=e.fromAddress,a=e.from,i=void 0===a?0:a,s=e.limit,o=void 0===s?256:s,t.prev=1,t.next=4,this.transferEvent("CastBinaryBallot").filter([{id:n,fromAddress:r}]).order("desc").apply(i,o);case 4:if(c=t.sent,c&&c.length){t.next=7;break}return t.abrupt("return",void 0);case 7:return t.abrupt("return",Promise.resolve(c.map((function(t){var e,n,r;return{txID:null===(e=t.meta)||void 0===e?void 0:e.txID,signer:null===(n=t.meta)||void 0===n?void 0:n.txOrigin,hash:null===(r=t.decoded)||void 0===r?void 0:r.ballotHash}}))));case 10:return t.prev=10,t.t0=t["catch"](1),t.abrupt("return",Promise.reject(t.t0.message||t.t0));case 13:case"end":return t.stop()}}),t,this,[[1,10]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"verifyBallot",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e,n){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.transferMethod("verifyBallot").call(e,n);case 3:if(r=t.sent,r&&"0x"!==r.data&&!r.reverted){t.next=6;break}return t.abrupt("return",void 0);case 6:return t.abrupt("return",Promise.resolve(r));case 9:return t.prev=9,t.t0=t["catch"](0),t.abrupt("return",Promise.reject(t.t0.message||t.t0));case 12:case"end":return t.stop()}}),t,this,[[0,9]])})));function e(e,n){return t.apply(this,arguments)}return e}()},{key:"castEndTime",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.transferMethod("castEndTime").call(e);case 3:if(n=t.sent,n&&"0x"!==n.data&&!n.reverted&&n.decoded){t.next=6;break}return t.abrupt("return",void 0);case 6:return t.abrupt("return",Promise.resolve(n.decoded[0]));case 9:return t.prev=9,t.t0=t["catch"](0),t.abrupt("return",Promise.reject(t.t0.message||t.t0));case 12:case"end":return t.stop()}}),t,this,[[0,9]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"getNumVoter",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.transferMethod("getNumVoter").call(e);case 3:if(n=t.sent,n&&"0x"!==n.data&&!n.reverted&&n.decoded){t.next=6;break}return t.abrupt("return",void 0);case 6:return t.abrupt("return",Promise.resolve(n.decoded[0]));case 9:return t.prev=9,t.t0=t["catch"](0),t.abrupt("return",Promise.reject(t.t0.message||t.t0));case 12:case"end":return t.stop()}}),t,this,[[0,9]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"getVoter",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e,n){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.transferMethod("getVoter").call(e,n);case 3:if(r=t.sent,r&&"0x"!==r.data){t.next=6;break}return t.abrupt("return",void 0);case 6:return t.abrupt("return",Promise.resolve("0x".concat(r.data.slice(26,66))));case 9:return t.prev=9,t.t0=t["catch"](0),t.abrupt("return",Promise.reject(t.t0.message||t.t0));case 12:case"end":return t.stop()}}),t,this,[[0,9]])})));function e(e,n){return t.apply(this,arguments)}return e}()},{key:"getTallyRes",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.transferMethod("getTallyRes").call(e);case 3:if(n=t.sent,n&&"0x"!==n.data){t.next=6;break}return t.abrupt("return",void 0);case 6:return t.abrupt("return",Promise.resolve(n.decoded));case 9:return t.prev=9,t.t0=t["catch"](0),t.abrupt("return",Promise.reject(t.t0.message||t.t0));case 12:case"end":return t.stop()}}),t,this,[[0,9]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"verifyTallyRes",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.transferMethod("verifyTallyRes").call(e);case 3:if(n=t.sent,n&&"0x"!==n.data){t.next=6;break}return t.abrupt("return",void 0);case 6:return t.abrupt("return",Promise.resolve(n.data));case 9:return t.prev=9,t.t0=t["catch"](0),t.abrupt("return",Promise.reject(t.t0.message||t.t0));case 12:case"end":return t.stop()}}),t,this,[[0,9]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"Tally",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e,n){var i,s,o,c,u,l,p;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,i=this.transferMethod("setTallyRes"),s=this.transferMethod("endTally"),i&&s){t.next=5;break}return t.abrupt("return",void 0);case 5:if(o=i.asClause.apply(i,Object(a["a"])(n)),c=s.asClause(n[0]),o&&c){t.next=9;break}return t.abrupt("return",void 0);case 9:if(u=d.vendor.sign("tx",[Object(r["a"])({},o),Object(r["a"])({},c)]),u){t.next=12;break}return t.abrupt("return",void 0);case 12:return u.signer(e).gas(0).delegate("https://omg.outofgas.io:28050/sign?authorization=275ad8b3-20e5-4041-bced-98532423ed0d"),t.next=15,u.request();case 15:if(l=t.sent,l&&"txid"in l){t.next=18;break}return t.abrupt("return",void 0);case 18:return t.next=20,this.getReceipt(l.txid);case 20:if(p=t.sent,!(null===p||void 0===p?void 0:p.reverted)){t.next=23;break}throw Error("Transaction Reverted");case 23:return t.abrupt("return",Promise.resolve({signer:e,txID:l.txid,voteID:null===p||void 0===p?void 0:p.outputs[0].events[0].topics[1]}));case 26:return t.prev=26,t.t0=t["catch"](0),t.abrupt("return",Promise.reject(t.t0.message||t.t0));case 29:case"end":return t.stop()}}),t,this,[[0,26]])})));function e(e,n){return t.apply(this,arguments)}return e}()},{key:"setTallyResEvent",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.transferEvent("SetTallyRes").filter([{voteID:e}]).order("desc").apply(0,1);case 3:return r=t.sent,t.abrupt("return",Promise.resolve(null===(n=r[0].meta)||void 0===n?void 0:n.txID));case 7:return t.prev=7,t.t0=t["catch"](0),t.abrupt("return",Promise.reject(t.t0.message||t.t0));case 10:case"end":return t.stop()}}),t,this,[[0,7]])})));function e(e){return t.apply(this,arguments)}return e}()}]),t}()},"7b8e":function(t,e,n){"use strict";n("87c0")},"7ed6":function(t,e,n){},8:function(t,e){},"84f7":function(t,e,n){},"87c0":function(t,e,n){},"8f39":function(t,e,n){"use strict";n("53bb")},"8fb4":function(t,e,n){},9:function(t,e){},"953f":function(t,e,n){"use strict";n("8fb4")},"9b72":function(t,e,n){"use strict";n("9f7e")},"9dd8":function(t,e,n){"use strict";n("1f2a")},"9f7e":function(t,e,n){},a324:function(t,e,n){"use strict";n("84f7")},a5b9:function(t,e,n){},a604:function(t,e,n){"use strict";n("c8bc")},aaeb:function(t,e,n){},b06f:function(t,e,n){"use strict";n("a5b9")},b0b7:function(t,e,n){},b28b:function(t,e,n){},b94c:function(t,e,n){},c2b1:function(t,e,n){},c4e4:function(t,e,n){},c747:function(t,e,n){},c8bc:function(t,e,n){},cd49:function(t,e,n){"use strict";n.r(e);n("96cf");var r=n("1da1"),a=(n("46a1"),n("450d"),n("e5f2")),i=n.n(a),s=(n("be4f"),n("896a")),o=n.n(s),c=(n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("786e"),n("2b0e")),u=n("4eb5"),l=n.n(u),p=n("d257"),d=n("79f6"),b=n("b2d6"),h=n.n(b),f=n("4897"),v=n.n(f),y=n("bc3a"),g=n.n(y),m=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Layout",[t.isRouterAlive?n("transition",{attrs:{name:"fade"}},[n("router-view")],1):t._e()],1)},j=[],O=n("d4ec"),x=n("bee2"),k=n("262e"),w=n("2caf"),_=n("9ab4"),T=n("60a3"),C=n("3617"),D=function(t){Object(k["a"])(n,t);var e=Object(w["a"])(n);function n(){var t;return Object(O["a"])(this,n),t=e.apply(this,arguments),t.isRouterAlive=!0,t}return Object(x["a"])(n,[{key:"reload",value:function(){var t=this;this.isRouterAlive=!1,this.$nextTick((function(){t.isRouterAlive=!0}))}}]),n}(T["g"]);Object(_["a"])([Object(T["e"])("reload")],D.prototype,"reload",null),D=Object(_["a"])([Object(T["a"])({components:{Layout:C["g"]}})],D);var S=D,R=S,E=(n("5742"),n("0c7c")),P=Object(E["a"])(R,m,j,!1,null,"dcaaf400",null),I=P.exports,z=(n("d3b7"),n("8c4f")),B=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Main",{staticClass:"root"},[n("NotFound")],1)},A=[],V=function(t){Object(k["a"])(n,t);var e=Object(w["a"])(n);function n(){return Object(O["a"])(this,n),e.apply(this,arguments)}return n}(T["g"]);V=Object(_["a"])([Object(T["a"])({components:{Main:C["h"],NotFound:C["i"]}})],V);var M=V,K=M,Y=(n("a604"),Object(E["a"])(K,B,A,!1,null,"4b6a2d4a",null)),N=Y.exports;c["default"].use(z["a"]);var $=[{path:"/",redirect:"/home"},{path:"/home",name:"Home",component:function(){return n.e("home").then(n.bind(null,"bb51b"))}},{path:"/new-proposal",name:"NewPropopsal",meta:{auth:!0},component:function(){return Promise.all([n.e("my-proposal~new-proposal~vote"),n.e("new-proposal")]).then(n.bind(null,"7669"))}},{path:"/my-proposal",name:"MyProposal",meta:{auth:!0},component:function(){return Promise.all([n.e("my-proposal~new-proposal~vote"),n.e("my-proposal")]).then(n.bind(null,"6e90"))}},{path:"/vote/:voteID",name:"vote",props:!0,component:function(){return Promise.all([n.e("my-proposal~new-proposal~vote"),n.e("vote")]).then(n.bind(null,"29c8"))}},{path:"*",name:"NotFound",component:N}],L=new z["a"]({mode:"history",base:"/",routes:$}),X=L,F=n("2f62");c["default"].use(F["a"]);var H=new F["a"].Store({state:{signer:"",config:{}},mutations:{setSigner:function(t,e){t.signer=e},setConfig:function(t,e){t.config=e}},actions:{setSigner:function(t,e){var n=t.commit;n("setSigner",e)},setConfig:function(t,e){var n=t.commit;n("setConfig",e)}}});n("c2b1"),n("a82d");v.a.use(h.a),c["default"].config.productionTip=!1,c["default"].use(l.a),c["default"].use(o.a.directive),c["default"].prototype.$notify=i.a;var U=sessionStorage.getItem("signer");U&&H.dispatch("setSigner",U),X.beforeEach(function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e,n,r){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.meta.auth&&!Object(p["c"])()&&"/home"!==n.fullPath?r("/home"):r(),r();case 2:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()),g.a.create().get("".concat("/","config.json")).then((function(t){var e=t.status,n=t.data;200===e&&(d["a"].getInstance(n.contractAddress),H.dispatch("setConfig",n),new c["default"]({router:X,store:H,render:function(t){return t(I)}}).$mount("#app"))}))},d257:function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"d",(function(){return s})),n.d(e,"c",(function(){return o})),n.d(e,"f",(function(){return c})),n.d(e,"g",(function(){return u})),n.d(e,"e",(function(){return l})),n.d(e,"a",(function(){return p})),n.d(e,"h",(function(){return d}));n("fb6a"),n("d3b7"),n("5cc6"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7");var r=n("786e");n("4160"),n("d81d"),n("a434"),n("ac1f"),n("1276"),n("159b");(function(){var t=function(t){return window.setTimeout((function(){t()}),1e3/60)};window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||t;var e=function(t){clearTimeout(t)};window.cancelAnimationFrame=window.cancelAnimationFrame||window.webkitRequestAnimationFrame||e})();var a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Vechain",e=document.querySelector(".zkp-home__background");e&&e.parentElement&&e.parentElement.removeChild(e);var n=window,r=n.innerWidth,a=n.innerHeight,i=document.createElement("canvas"),s=i.getContext("2d");document.body.appendChild(i),i.className="zkp-home__background",i.width=r,i.height=a;for(var o=12,c=r/36,u=t.split(""),l=[],p=0;p<c;p+=1){for(var d=[],b=36*p,h=0;h<u.length;h+=1)0===h?d.push({x:b,y:parseInt("".concat(Math.random()*a),10),text:u[h]}):d.push({x:b,y:d[h-1].y+o,text:u[h]});l.push(d)}var f=function(t){var e=parseInt("".concat(Math.random()*a),10),n=t.map((function(t,n){return{x:t.x,y:n*o-e,text:t.text}}));l.push(n)},v=function t(){s.clearRect(0,0,r,a),l.forEach((function(t,e){t.forEach((function(n,r){s.fillStyle="rgba(255 , 255, 255, 0.15)",s.font="".concat(o,"px Courier New"),n.y>1.25*a&&r>=t.length-1?(f(t),l.splice(e,1)):(Object.assign(n,{y:n.y+o}),s.fillText(n.text,n.x,n.y))}))})),window.requestAnimationFrame(t)};v()},i=Object(r["a"])(),s=function(t){return new Promise((function(e){setTimeout((function(){e(!0)}),t)}))},o=function(){return sessionStorage.getItem("signer")},c=function(){return window.navigator.onLine},u=function(){var t="0x000000000b2bce3c70bc649a02749e8687721b09ed2e15997f466536b20bb127",e=i.thor.genesis;return e.id===t},l=function(t){return"".concat(t.slice(0,8),"...")},p=function(t){return new Promise((function(e){var n=new Uint8Array(t),r=new FileReader;r.readAsText(new Blob([n]),"utf-8"),r.onload=function(){e(JSON.parse(r.result))}}))},d=[{type:"warning",label:"Pending"},{type:"default",label:"Voting"},{type:"error",label:"To be tallied"},{type:"ended",label:"Ended"}]},dce4:function(t,e,n){},df6a:function(t,e,n){"use strict";n("c747")},e082:function(t,e,n){}});